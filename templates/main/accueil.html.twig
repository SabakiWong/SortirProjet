{% extends 'base.html.twig' %}

{% block style %}{{ asset('css/accueil.css') }}{% endblock %}
{% block title %}Accueil | {{ parent() }}{% endblock %}

{% block body %}
    <section id="date-et-participant">
        <p>Date du jour: {{ "now"|date("d/m/Y", "Europe/Paris") }}</p>
        <p>Participant: {{ app.user.nom}} </p>
    </section>

    <section>
        {% include 'sortie/filtre.html.twig' %}
    </section>

    <form action="" method="get">
        <section id="recherche">

            <div class="div-filtre">
                <h2>Filtrer les sorties</h2>
                <div id="liste-campus-div">
                    <label for="liste-campus">Campus:</label>
                    <select name="campus" id="liste-campus">
                        <option value="1">Saint Herblain</option>
                        <option value="1">222222</option>
                        <option value="1">333333</option>
                    </select>
                </div>

                <div id="search-bar-div">
                    <label for="search-bar">Le nom de la sortie contient</label>
                    <input type="text" name="search" id="search-bar">
                </div>

                <div id="dates_div">
                    <label for="date-debut">Entre</label>
                    <input type="datetime-local" name="dateDebut" id="date-debut">

                    <label for="date-fin">et</label>
                    <input type="datetime-local" name="dateFin" id="date-fin">
                </div>
            </div>


            <div id="checkbox_div">
                <input type="checkbox">
                <label for="">Sorties dont je suis l'organisateur/trice</label>
                <input type="checkbox">
                <label for="">Sorties auxquelles je suis inscrit/e</label>
                <input type="checkbox">
                <label for="">Sorties passées</label>
            </div>

            <button type="submit">Rechercher</button>
        </section>

        <section id="tableau-sorties">
            <table id="liste-sorties">
                <thead>
                <tr>
                    <td class="thead-element">Nom de la sortie</td>
                    <td class="thead-element">Date de la sortie</td>
                    <td class="thead-element">Clôtures</td>
                    <td class="thead-element">Inscrits/places</td>
                    <td class="thead-element">État</td>
                    <td class="thead-element">Inscrit</td>
                    <td class="thead-element">Organisateur</td>
                    <td class="thead-element">Actions</td>
                </tr>
                </thead>
                <tbody>
                {% for sortie in sorties %}
                    <tr>
                        <td>{{ sortie.nom }}</td>
                        <td>{{ sortie.dateHeureDebut|date("d/m/Y", "Europe/Paris") }}</td>
                        <td>{{ sortie.dateLimiteInscription|date("d/m/Y", "Europe/Paris") }}</td>
                        <td> à faire</td>
                        <td>{{ sortie.etat.libelle }}</td>
                        <td>Oui</td> {# todo: dynamiser la liste #}
                        <td>{{ sortie.organisateur.nom }}</td>
                        <td><a href="#afficherUneSortie">Afficher</a></td>
                    </tr>
                {% endfor %}
                </tbody>
            </table>
        </section>
    </form>

    <section id="button-creation-sortie">
        <button><a href="{{ path('sortie_create') }}">Créer une sortie</a></button>
    </section>
{% endblock %}

